@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model WebApplication1.Helpers.PaginatedList<WebApplication1.Models.Movie>

<div class="flex flex-col items-center justify-start mt-4 px-2 bg-gray-50 min-h-screen">
    <h2 class="text-xl font-bold mb-2 text-gray-800 text-center w-full">Movies</h2>

    <!-- Create Button -->
    <div class="w-full mb-2 flex justify-end px-2">
        <a href="@Url.Action("Create", "Movie")" class="btn-create">+ Create</a>
    </div>

    <!-- Table Container with overflow visible -->
    <div class="w-full overflow-visible">
        <table class="w-full border border-gray-300 divide-y divide-gray-300 table-no-scroll">
            <thead class="bg-indigo-200 text-indigo-900 text-xs">
                <tr>
                    <th class="px-1 py-1">Image</th>
                    <th class="px-1 py-1">Title</th>
                    <th class="px-1 py-1">Genre</th>
                    <th class="px-1 py-1">Actions</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200 text-xs">
                @foreach (var movie in Model)
                {
                    <tr class="hover:bg-indigo-50">
                        <!-- Movie Image -->
                        <td class="px-1 py-1 text-center">
                            <div class="w-12 h-15 mx-auto overflow-hidden rounded-md">
                                <img src="@(!string.IsNullOrEmpty(movie.ImageFile) ? "/images/" + movie.ImageFile : "/images/placeholder.png")"
                                alt="@movie.Name" class="w-full h-full object-cover" />
                                </div>
                        </td>

                        <td class="px-1 py-1 text-center h-19">@movie.Name</td>
                        <td class="px-1 py-1 text-center h-19">@movie.Genre?.Name</td>
                        <td class="px-1 py-1 text-center h-19">
                            <div class="flex flex-wrap justify-center items-center gap-1">
                                <a href="@Url.Action("Edit", "Movie", new { id = movie.Id })" class="btn-edit text-xs px-1 py-0.5">Edit</a>
                                <a href="@Url.Action("Delete", "Movie", new { id = movie.Id })" class="btn-delete text-xs px-1 py-0.5">Delete</a>
                                <a href="@Url.Action("Details", "Movie", new { id = movie.Id })" class="btn-details text-xs px-1 py-0.5">Details</a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <div class="mt-2 w-full flex justify-center space-x-1 px-2">
        @if (Model.HasPreviousPage)
        {
            <a href="@Url.Action("Index", new { page = Model.PageIndex - 1 })" class="btn-page text-xs px-1 py-0.5">Previous</a>
        }
        @if (Model.HasNextPage)
        {
            <a href="@Url.Action("Index", new { page = Model.PageIndex + 1 })" class="btn-page text-xs px-1 py-0.5">Next</a>
        }
    </div>
</div>

<style>
/* Buttons */
.btn-create { padding: 8px 10px; border-radius: 4px; background-color: #10b981; color: white; font-size: 0.7rem; text-decoration: none; display: inline-block; }
.btn-edit { padding: 8px 10px; border-radius: 3px; background-color: #6a64cd; color: white; text-decoration: none; font-size: 0.65rem; display: inline-block; white-space: nowrap; }
.btn-delete { padding: 8px 10px; border-radius: 3px; background-color: #e67777; color: white; text-decoration: none; font-size: 0.65rem; display: inline-block; white-space: nowrap; }
.btn-details { padding: 8px 10px; border-radius: 3px; background-color: #5688d8; color: white; text-decoration: none; font-size: 0.65rem; display: inline-block; white-space: nowrap; }
.btn-page { padding: 6px 8px; border-radius: 3px; background-color: #e5e7eb; color: #374151; text-decoration: none; font-size: 0.65rem; display: inline-block; }

/* Table */
.table-no-scroll { 
    width: 100%; 
    border-collapse: collapse; 
    table-layout: auto; 
    font-size: 0.75rem; 
}
.table-no-scroll th, .table-no-scroll td { 
    text-align: center; 
    vertical-align: middle; 
    padding: 2px 4px; 
    word-wrap: break-word;
    height: 80px;
}
.table-no-scroll th:first-child,
.table-no-scroll td:first-child {
    width: 80px;
}
.table-no-scroll img {
    max-width: 64px;
    max-height: 80px;
    object-fit: cover;
}

/* Hover Effects */
.btn-edit:hover { background-color: #504eb5; }
.btn-delete:hover { background-color: #a94444; }
.btn-details:hover { background-color: #2563eb; }
.btn-create:hover { background-color: #059669; }
.btn-page:hover { background-color: #d1d5db; }
</style>