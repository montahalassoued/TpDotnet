@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model WebApplication1.Helpers.PaginatedList<WebApplication1.Models.Movie>

<div class="container py-4">
    <h2 class="text-center text-primary mb-3">Movies</h2>

    <!-- Create Button -->
    <div class="mb-3 text-end">
        <a href="@Url.Action("Create", "Movie")" class="btn btn-success btn-sm">+ Create</a>
    </div>

    <!-- Table -->
    <div class="table-responsive">
        <table class="table table-bordered table-hover align-middle text-center">
            <thead class="table-primary">
                <tr>
                    <th>Image</th>
                    <th>Title</th>
                    <th>Genre</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var movie in Model)
                {
                    <tr>
                        <!-- Movie Image -->
                        <td>
                            <img src="@(!string.IsNullOrEmpty(movie.ImageFile) ? "/images/" + movie.ImageFile : "/images/placeholder.png")"
                                 alt="@movie.Name" class="img-thumbnail" style="max-width: 64px; max-height: 80px;" />
                        </td>

                        <td>@movie.Name</td>
                        <td>@movie.Genre?.Name</td>
                        <td>
                            <div class="d-flex justify-content-center gap-1 flex-wrap">
                                <a href="@Url.Action("Edit", "Movie", new { id = movie.Id })" class="btn btn-sm btn-primary">Edit</a>
                                <a href="@Url.Action("Delete", "Movie", new { id = movie.Id })" class="btn btn-sm btn-danger">Delete</a>
                                <a href="@Url.Action("Details", "Movie", new { id = movie.Id })" class="btn btn-sm btn-info text-white">Details</a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <nav aria-label="Page navigation" class="mt-3">
        <ul class="pagination justify-content-center mb-0">
            @if (Model.HasPreviousPage)
            {
                <li class="page-item">
                    <a class="page-link" href="@Url.Action("Index", new { page = Model.PageIndex - 1 })">Previous</a>
                </li>
            }
            @if (Model.HasNextPage)
            {
                <li class="page-item">
                    <a class="page-link" href="@Url.Action("Index", new { page = Model.PageIndex + 1 })">Next</a>
                </li>
            }
        </ul>
    </nav>
</div>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}