@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model WebApplication1.Helpers.PaginatedList<WebApplication1.Models.Movie>

<div class="flex flex-col items-center justify-center mt-8 px-2">
    <h2 class="text-3xl font-bold mb-6 text-gray-800 text-center">Films</h2>

    <div class="overflow-x-auto w-full">
        <table class="min-w-full border border-gray-300 divide-y divide-gray-200">
            <thead class="bg-gray-200">
                <tr class="text-center">
                    <th class="px-4 py-2 w-1/12">ID</th>
                    <th class="px-4 py-2 w-3/12">Name</th>
                    <th class="px-4 py-2 w-3/12">Genre</th>
                    <th class="px-4 py-2 w-3/12">Image</th>
                    <th class="px-4 py-2 w-2/12">Actions</th>
                </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200">
                @foreach (var movie in Model)
                {
                    <tr class="hover:bg-gray-100">
                        <td class="px-4 py-2 text-center">@movie.Id</td>
                        <td class="px-4 py-2 text-center">@movie.Name</td>
                        <td class="px-4 py-2 text-center">@movie.Genre?.Name</td>
                        <td class="px-4 py-2 text-center">
                            <img src="@(movie.ImageUrl ?? "/images/placeholder.png")" 
                                 alt="@movie.Name" 
                                 class="w-24 h-24 object-cover mx-auto rounded" />
                        </td>
                        <td class="px-4 py-2 text-center space-x-1">
                            <a href="@Url.Action("Edit", "Movie", new { id = movie.Id })" 
                               class="px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm">Edit</a>
                            <a href="@Url.Action("Delete", "Movie", new { id = movie.Id })" 
                               class="px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-sm">Delete</a>
                            <a href="@Url.Action("Details", "Movie", new { id = movie.Id })" 
                               class="px-2 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm">Details</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <div class="mt-6 flex justify-center">
        <ul class="inline-flex space-x-2 flex-wrap justify-center">
            @if (Model.HasPreviousPage)
            {
                <li>
                    <a href="@Url.Action("Index", new { page = Model.PageIndex - 1 })" 
                       class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Précédent</a>
                </li>
            }

            @for (int i = 1; i <= Model.TotalPages; i++)
            {
                <li>
                    <a href="@Url.Action("Index", new { page = i })"
                       class="px-3 py-1 rounded @(i == Model.PageIndex ? "bg-blue-500 text-white" : "bg-gray-200 hover:bg-gray-300")">
                        @i
                    </a>
                </li>
            }

            @if (Model.HasNextPage)
            {
                <li>
                    <a href="@Url.Action("Index", new { page = Model.PageIndex + 1 })" 
                       class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Suivant</a>
                </li>
            }
        </ul>
    </div>
</div>

<style>
/* Pour s'assurer que toutes les images ont la même taille */
img { width: 6rem; height: 6rem; object-fit: cover; }
</style>
