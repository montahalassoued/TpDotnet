@model X.PagedList.IPagedList<WebApplication1.Models.Movie>
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<div class="flex flex-col items-center justify-center mt-8">
    <h2 class="text-3xl font-bold mb-6 text-gray-800">Films</h2>

    <table class="table-fixed border border-gray-300 w-4/5">
        <thead class="bg-gray-200">
            <tr>
                <th class="w-1/12 px-4 py-2">ID</th>
                <th class="w-3/12 px-4 py-2">Name</th>
                <th class="w-4/12 px-4 py-2">Image</th>
                <th class="w-4/12 px-4 py-2">Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var movie in Model)
            {
                <tr class="hover:bg-gray-100 transition-colors duration-200">
                    <td class="px-4 py-2 text-center">@movie.Id</td>
                    <td class="px-4 py-2">@movie.Name</td>
                    <td class="px-2 py-1 text-center">
                        <img src="@(movie.ImageUrl ?? "/images/placeholder.png")" alt="@movie.Name" class="small-image mx-auto" />
                    </td>
                    <td class="px-4 py-2 text-center">
                        <a href="@Url.Action("Edit", "Movie", new { id = movie.Id })" class="btn btn-edit">Edit</a>
                        <a href="@Url.Action("Delete", "Movie", new { id = movie.Id })" class="btn btn-delete">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <!-- Pagination manuelle -->
    <div class="mt-4">
        <ul class="flex space-x-2">
            @if (Model.HasPreviousPage)
            {
                <li>
                    <a href="@Url.Action("Index", new { page = Model.PageNumber - 1 })" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Précédent</a>
                </li>
            }

            @for (int i = 1; i <= Model.PageCount; i++)
            {
                <li>
                    <a href="@Url.Action("Index", new { page = i })" class="px-3 py-1 rounded @(i == Model.PageNumber ? "bg-blue-500 text-white" : "bg-gray-200 hover:bg-gray-300")">@i</a>
                </li>
            }

            @if (Model.HasNextPage)
            {
                <li>
                    <a href="@Url.Action("Index", new { page = Model.PageNumber + 1 })" class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300">Suivant</a>
                </li>
            }
        </ul>
    </div>
</div>

<style>
.small-image { width: 80px; height: auto; }
a.btn { padding: 5px 10px; border-radius: 4px; color: white; text-decoration: none; margin-right: 5px; }
a.btn-edit { background-color: #5b5be1; }
a.btn-edit:hover { background-color: #3f3fc1; }
a.btn-delete { background-color: #d36060; }
a.btn-delete:hover { background-color: #b04040; }
</style>
